{"version":3,"sources":["webpack:///src/components/goodsadd/goodsadd.vue","webpack:///./src/components/goodsadd/goodsadd.vue?74d3","webpack:///./src/components/goodsadd/goodsadd.vue"],"names":["goodsadd","data","active","addFormObj","goods_name","goods_price","goods_weight","goods_number","rules","required","message","trigger","menuOptions","menuProp","value","label","expandTrigger","menuSelect","manyData","onlyData","checked","fileList","setHeaders","Authorization","localStorage","getItem","ImgDialogFormVisible","imgUrl","content","methods","handleClick","tab","event","_this","this","asyncToGenerator_default","regenerator_default","a","mark","_callee","id","sel","result","_result$data","meta","wrap","_context","prev","next","index","length","$message","error","abrupt","$http","get","sent","status","msg","stop","getAllMenusData","_this2","_callee2","_result$data2","_context2","uploadSuccess","response","file","push","name","tmp_path","url","type","removeImg","i","splice","preview","_this3","$nextTick","$refs","showImg","src","addGoods","_this4","_callee3","postAddObj","_result$data3","_context3","goods_cat","join","goods_introduce","post","$router","created","components","breadNav","goodsadd_goodsadd","render","_vm","_h","$createElement","_c","_self","attrs","nav1","nav2","_v","staticClass","title","center","show-icon","align-center","finish-status","tab-position","on","tab-click","label-position","model","status-icon","label-width","prop","autocomplete","callback","$$v","$set","expression","_s","options","props","_l","item","attr_name","attr_vals","split","item1","border","placeholder","action","list-type","file-list","headers","on-success","on-remove","on-preview","size","click","visible","update:visible","$event","ref","slot","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/8.56f46e8a685c277d4665.js","sourcesContent":["<template>\n  <el-card>\n    <!--面包屑导航-->\n    <breadNav :nav1=\"'商品管理'\" :nav2=\"'商品列表'\"/>\n    <!--消息提示框-->\n    <el-alert class=\"myAlert\" title=\"添加商品信息\" type=\"info\" center show-icon></el-alert>\n    <!--完成步骤条-->\n    <!--\n        align-center: 居中\n        :active: 设置当前激活步骤\n    -->\n    <el-steps align-center :active=\"active\" finish-status=\"success\" class=\"mySteps\">\n      <el-step title=\"基本信息\"></el-step>\n      <el-step title=\"商品参数\"></el-step>\n      <el-step title=\"商品属性\"></el-step>\n      <el-step title=\"商品图片\"></el-step>\n      <el-step title=\"商品内容\"></el-step>\n    </el-steps>\n\n    <!--tab标签页-->\n    <!--\n        @tab-click:点击标签页时触发\n        tab-position:设置标签的位置\n        value:默认选中\n    -->\n    <el-tabs value=\"first\" class=\"myTabs\" @tab-click=\"handleClick\" tab-position=\"left\">\n      <!--1.基本信息-->\n      <el-tab-pane label=\"基本信息\" name=\"first\">\n        <!--表单-->\n        <el-form label-position=\"top\" :rules=\"rules\" :model=\"addFormObj\" status-icon label-width=\"100px\">\n          <el-form-item label=\"商品名称\" prop=\"goods_name\">\n            <el-input type=\"text\" v-model=\"addFormObj.goods_name\" autocomplete=\"off\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"商品价格\" prop=\"goods_price\">\n            <el-input type=\"text\" v-model=\"addFormObj.goods_price\" autocomplete=\"off\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"商品重量\" prop=\"goods_weight\">\n            <el-input type=\"text\" v-model=\"addFormObj.goods_weight\" autocomplete=\"off\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"商品数量\" prop=\"goods_number\">\n            <el-input type=\"text\" v-model=\"addFormObj.goods_number\" autocomplete=\"off\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"商品分类\">\n            {{ menuSelect }}\n            <el-cascader\n              :options=\"menuOptions\"\n              :props=\"menuProp\"\n              v-model=\"menuSelect\"></el-cascader>\n          </el-form-item>\n        </el-form>\n      </el-tab-pane>\n      <!--2.商品参数-->\n      <el-tab-pane label=\"商品参数\" name=\"second\">\n        <div v-for=\"item in manyData\" class=\"canshuRow\">\n          <p class=\"canshuName\">{{ item.attr_name }}</p>\n          <div>\n            <el-checkbox border v-model=\"checked\" v-for=\"item1 in item.attr_vals.split(',')\">{{ item1 }}\n            </el-checkbox>\n          </div>\n        </div>\n\n\n      </el-tab-pane>\n      <!--3.商品属性-->\n      <el-tab-pane label=\"商品属性\" name=\"third\">\n        <div v-for=\"item in onlyData\" class=\"canshuRow\">\n          <p class=\"canshuName\">{{ item.attr_name }}</p>\n          <el-input v-model=\"item.attr_vals\" placeholder=\"请输入内容\"></el-input>\n        </div>\n\n\n      </el-tab-pane>\n      <!--4.商品图片-->\n      <el-tab-pane label=\"商品图片\" name=\"fourth\">\n        <!--\n              action:必须的参数 上传的地址 需传入完整的地址\n              list-type:文件列表的类型\n              file-list:上传的文件列表 [{name: 'food.jpg', url: 'https://xxx.cdn.com/xxx.jpg'}]\n\n              如果直接这样写:会上传失败 需要手动设置请求头\n              headers:设置上传请求的头部 {}\n\n              这个时候就纳闷了 为什么{{ fileList }}始终是一个空数组 其实是需要手动在上传成功钩子中手动追加的\n              on-success:文件上传成功时的钩子               function(response, file, fileList)\n              on-remove:文件列表移除文件时的钩子            function(file, fileList)\n              on-preview:点击文件列表中已上传的文件时的钩子\t  function(file)\n        -->\n        <el-upload\n          class=\"upload-demo\"\n          action=\"http://localhost:8888/api/private/v1/upload\"\n          list-type=\"picture\"\n          :file-list=\"fileList\"\n          :headers=\"setHeaders\"\n          :on-success=\"uploadSuccess\"\n          :on-remove=\"removeImg\"\n          :on-preview=\"preview\"\n        >\n          <el-button size=\"small\" type=\"primary\">点击上传</el-button>\n        </el-upload>\n        {{ fileList }}\n      </el-tab-pane>\n      <!--5.商品内容-->\n      <el-tab-pane label=\"商品内容\" name=\"fifth\">\n        <el-button type=\"primary\" @click=\"addGoods\">添加商品</el-button>\n        <quill-editor v-model=\"content\">\n        </quill-editor>\n\n      </el-tab-pane>\n    </el-tabs>\n\n    <!--图片预览的对话框-->\n    <el-dialog title=\"图片预览\" :visible.sync=\"ImgDialogFormVisible\">\n      <!--在vue中 使用ref操作dom-->\n      <!--解决方式1-->\n      <!--<img ref=\"showImg\" :src=\"imgUrl\">-->\n      <!--解决方式2-->\n      <img ref=\"showImg\">\n\n      <!--使用element-ui中的image组件-->\n      <!--<el-image :src=\"imgUrl\"></el-image>-->\n\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button type=\"primary\" @click=\"ImgDialogFormVisible = false\">确 定</el-button>\n      </div>\n    </el-dialog>\n\n  </el-card>\n</template>\n\n<script>\n  //引入面包屑导航\n  import breadNav from '../layout/breadNav/breadNav'\n\n  export default {\n    data() {\n      return {\n        active: 0, //步骤条的标识\n        addFormObj: { //基本信息中的数据源\n          goods_name: '',\n          goods_price: '',\n          goods_weight: '',\n          goods_number: ''\n        },\n        //基本信息中的验证规则\n        rules: {\n          goods_name: [\n            {required: true, message: '请输入商品名称', trigger: 'blur'}\n          ],\n          goods_price: [\n            {required: true, message: '请输入商品价格', trigger: 'blur'}\n          ],\n          goods_weight: [\n            {required: true, message: '请输入商品重量', trigger: 'blur'}\n          ],\n          goods_number: [\n            {required: true, message: '请输入商品数量', trigger: 'blur'}\n          ]\n\n        },\n        menuOptions: [], //级联菜单中的所有数据\n        menuProp: {\n          value: 'cat_id', //当前选项对应的值\n          label: 'cat_name', //当前选项显示的文本信息\n          expandTrigger: 'hover' //hover触发\n        },\n        menuSelect: [], //当前级联菜单选中的数据 可以设置默认值\n        manyData: [], // 商品参数的数据\n        onlyData: [], //商品属性的数据\n        checked: true, //商品参数的多选框默认选中\n\n        //商品图片\n        fileList: [], //文件上传的集合\n        setHeaders: { //设置上传的请求头\n          Authorization: localStorage.getItem('token')\n        },\n        ImgDialogFormVisible: false, //控制的是图片预览对话框的显示与隐藏\n        imgUrl: '', //预览图片的路径\n\n        content: '', //富文本编辑器中的内容\n\n      }\n    },\n    methods: {\n      //tabs标签页的点击事件\n      //参数1:tab   vue实例\n      //参数2:event 事件源对象\n      async handleClick(tab, event) {\n        //将选项卡中的下标修改成当前点击的index值\n        // console.log(tab.index); string\n        this.active = +tab.index;\n\n        if (this.active === 1 || this.active === 2) {\n          if (this.menuSelect.length === 0) {\n            this.$message.error('请选择商品分类');\n            return;\n          }\n\n          //执行到这 说明选择了商品分类 那么应该根据 选择的商品分类 [1,3,6] 去发送请求到服务器\n          //console.log(this.menuSelect); //[1, 3, 6]\n\n          //拿到最后一个id\n          let id = this.menuSelect[this.menuSelect.length - 1];\n          //设置一个参数 知道当前点击的是 商品参数还是商品属性\n          let sel = this.active === 1 ? 'many' : 'only';\n\n          //发送请求\n          let result = await this.$http.get(`categories/${id}/attributes?sel=${sel}`);\n          let {data, meta} = result.data;\n          if (meta.status === 200) {\n            //根据当前点击的tabs选项卡 来存储数据\n            sel === 'many' ? this.manyData = data : this.onlyData = data;\n          } else {\n            this.$message.error(meta.msg);\n          }\n\n          //可以查看到针对不同的tabs选项卡 获取到不同的数据\n          // console.log(this.manyData);\n          // console.log(this.onlyData);\n\n        }\n\n      },\n      //获取级联菜单中的所有数据\n      async getAllMenusData() {\n        let result = await this.$http.get(`categories?type=3`);\n        let {data, meta} = result.data;\n        if (meta.status === 200) {\n          this.menuOptions = data;\n        } else {\n          this.$message.error(meta.msg);\n        }\n      },\n      //图片上传-----------------------------\n      //该方法是将上传成功的文件保存到 fileList 中\n      uploadSuccess(response, file, fileList) {\n        // console.log(response); //服务器响应回来的数据 tmp_path:生成的图片名称 url:上传后图片所在的服务器的路径\n        // console.log(file); //本次上传文件信息(包含了response)\n        // console.log(fileList); //上传的所有文件信息(包含了response&file)\n        let {data, meta} = response;\n        if (meta.status === 200) {\n          this.fileList.push({ //将上传成功的文件保存到fileList中\n            name: response.data.tmp_path,\n            url: response.data.url\n          });\n\n          this.$message({\n            type: 'success',\n            message: meta.msg\n          });\n        } else {\n          this.$message.error(meta.msg);\n        }\n      },\n      //文件列表移除文件时的方法\n      removeImg(file, fileList) {\n        // console.log(file); //本次删除的文件的信息  file.name就是当前删除的文件的文件名\n        // console.log(fileList); //文件列表移除的所有信息\n\n        //循环遍历 this.fileList, 在数组每一项中找到 当前删除的文件名\n        for (var i = 0; i < this.fileList.length; i++) {\n          if (this.fileList[i].name === file.name) {\n            this.fileList.splice(i, 1);  //从i开始删除1项\n          }\n        }\n      },\n      //点击文件列表中已上传的文件会触发\n      preview(file) {\n        //创建一个Dialog对话框 将图片预览在对话框中\n        this.ImgDialogFormVisible = true; //显示对话框\n\n        //console.log(file); //当前选中的图片信息\n\n        //1.使用element-ui中的el-image\n        //this.imgUrl = file.url;\n\n\n        //2.使用ref操作dom\n        //注意:通过dom去操作vue的页面 页面是不会有数据响应式效果\n        //解决方法:\n        //        1.将src中的图片数据放到data中\n        //         this.imgUrl = file.url;\n        //        2.等页面重新渲染时执行这个dom操作 $$nextTick方法(与生命周期有关的方法)\n        this.$nextTick(() => {\n          this.$refs.showImg.src = file.url;\n        })\n\n\n      },\n      //为添加商品 按钮绑定点击事件\n      async addGoods() {\n        let postAddObj = {\n          goods_name: this.addFormObj.goods_name,\n          goods_cat: this.menuSelect.join(','),\n          goods_price: this.addFormObj.goods_price,\n          goods_number: this.addFormObj.goods_number,\n          goods_weight: this.addFormObj.goods_weight,\n          goods_introduce: this.content\n        };\n\n        let result = await this.$http.post('goods', postAddObj);\n\n        let {data, meta} = result.data;\n        if (meta.status === 201) {\n          this.$message({\n            type: 'success',\n            message: meta.msg\n          });\n\n          //跳转到goods\n          this.$router.push('/goods');\n        } else {\n          this.$message.error(meta.msg);\n        }\n      }\n    },\n    created() {\n      this.getAllMenusData();\n    },\n    components: {\n      breadNav\n    }\n  }\n</script>\n\n<style lang=\"less\">\n  /* less中定义变量 */\n  @mt: 20px; /* 上外边距 */\n\n  .myAlert,\n  .mySteps,\n  .myTabs {\n    margin-top: @mt;\n  }\n\n  /* 设置步骤条中的文本 */\n  .el-step__title {\n    font-size: 12px !important;\n  }\n\n  /* 商品参数中参数的标题名 */\n  .canshuName {\n    font-size: 14px;\n  }\n\n  /* 商品参数中 各行参数的间隙 */\n  .canshuRow {\n    margin-bottom: 50px;\n  }\n\n  /* 富文本编辑器高度 */\n  .ql-editor {\n    height: 300px;\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/goodsadd/goodsadd.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-card',[_c('breadNav',{attrs:{\"nav1\":'商品管理',\"nav2\":'商品列表'}}),_vm._v(\" \"),_c('el-alert',{staticClass:\"myAlert\",attrs:{\"title\":\"添加商品信息\",\"type\":\"info\",\"center\":\"\",\"show-icon\":\"\"}}),_vm._v(\" \"),_c('el-steps',{staticClass:\"mySteps\",attrs:{\"align-center\":\"\",\"active\":_vm.active,\"finish-status\":\"success\"}},[_c('el-step',{attrs:{\"title\":\"基本信息\"}}),_vm._v(\" \"),_c('el-step',{attrs:{\"title\":\"商品参数\"}}),_vm._v(\" \"),_c('el-step',{attrs:{\"title\":\"商品属性\"}}),_vm._v(\" \"),_c('el-step',{attrs:{\"title\":\"商品图片\"}}),_vm._v(\" \"),_c('el-step',{attrs:{\"title\":\"商品内容\"}})],1),_vm._v(\" \"),_c('el-tabs',{staticClass:\"myTabs\",attrs:{\"value\":\"first\",\"tab-position\":\"left\"},on:{\"tab-click\":_vm.handleClick}},[_c('el-tab-pane',{attrs:{\"label\":\"基本信息\",\"name\":\"first\"}},[_c('el-form',{attrs:{\"label-position\":\"top\",\"rules\":_vm.rules,\"model\":_vm.addFormObj,\"status-icon\":\"\",\"label-width\":\"100px\"}},[_c('el-form-item',{attrs:{\"label\":\"商品名称\",\"prop\":\"goods_name\"}},[_c('el-input',{attrs:{\"type\":\"text\",\"autocomplete\":\"off\"},model:{value:(_vm.addFormObj.goods_name),callback:function ($$v) {_vm.$set(_vm.addFormObj, \"goods_name\", $$v)},expression:\"addFormObj.goods_name\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"商品价格\",\"prop\":\"goods_price\"}},[_c('el-input',{attrs:{\"type\":\"text\",\"autocomplete\":\"off\"},model:{value:(_vm.addFormObj.goods_price),callback:function ($$v) {_vm.$set(_vm.addFormObj, \"goods_price\", $$v)},expression:\"addFormObj.goods_price\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"商品重量\",\"prop\":\"goods_weight\"}},[_c('el-input',{attrs:{\"type\":\"text\",\"autocomplete\":\"off\"},model:{value:(_vm.addFormObj.goods_weight),callback:function ($$v) {_vm.$set(_vm.addFormObj, \"goods_weight\", $$v)},expression:\"addFormObj.goods_weight\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"商品数量\",\"prop\":\"goods_number\"}},[_c('el-input',{attrs:{\"type\":\"text\",\"autocomplete\":\"off\"},model:{value:(_vm.addFormObj.goods_number),callback:function ($$v) {_vm.$set(_vm.addFormObj, \"goods_number\", $$v)},expression:\"addFormObj.goods_number\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"商品分类\"}},[_vm._v(\"\\n          \"+_vm._s(_vm.menuSelect)+\"\\n          \"),_c('el-cascader',{attrs:{\"options\":_vm.menuOptions,\"props\":_vm.menuProp},model:{value:(_vm.menuSelect),callback:function ($$v) {_vm.menuSelect=$$v},expression:\"menuSelect\"}})],1)],1)],1),_vm._v(\" \"),_c('el-tab-pane',{attrs:{\"label\":\"商品参数\",\"name\":\"second\"}},_vm._l((_vm.manyData),function(item){return _c('div',{staticClass:\"canshuRow\"},[_c('p',{staticClass:\"canshuName\"},[_vm._v(_vm._s(item.attr_name))]),_vm._v(\" \"),_c('div',_vm._l((item.attr_vals.split(',')),function(item1){return _c('el-checkbox',{attrs:{\"border\":\"\"},model:{value:(_vm.checked),callback:function ($$v) {_vm.checked=$$v},expression:\"checked\"}},[_vm._v(_vm._s(item1)+\"\\n          \")])}),1)])}),0),_vm._v(\" \"),_c('el-tab-pane',{attrs:{\"label\":\"商品属性\",\"name\":\"third\"}},_vm._l((_vm.onlyData),function(item){return _c('div',{staticClass:\"canshuRow\"},[_c('p',{staticClass:\"canshuName\"},[_vm._v(_vm._s(item.attr_name))]),_vm._v(\" \"),_c('el-input',{attrs:{\"placeholder\":\"请输入内容\"},model:{value:(item.attr_vals),callback:function ($$v) {_vm.$set(item, \"attr_vals\", $$v)},expression:\"item.attr_vals\"}})],1)}),0),_vm._v(\" \"),_c('el-tab-pane',{attrs:{\"label\":\"商品图片\",\"name\":\"fourth\"}},[_c('el-upload',{staticClass:\"upload-demo\",attrs:{\"action\":\"http://localhost:8888/api/private/v1/upload\",\"list-type\":\"picture\",\"file-list\":_vm.fileList,\"headers\":_vm.setHeaders,\"on-success\":_vm.uploadSuccess,\"on-remove\":_vm.removeImg,\"on-preview\":_vm.preview}},[_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\"}},[_vm._v(\"点击上传\")])],1),_vm._v(\"\\n      \"+_vm._s(_vm.fileList)+\"\\n    \")],1),_vm._v(\" \"),_c('el-tab-pane',{attrs:{\"label\":\"商品内容\",\"name\":\"fifth\"}},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.addGoods}},[_vm._v(\"添加商品\")]),_vm._v(\" \"),_c('quill-editor',{model:{value:(_vm.content),callback:function ($$v) {_vm.content=$$v},expression:\"content\"}})],1)],1),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":\"图片预览\",\"visible\":_vm.ImgDialogFormVisible},on:{\"update:visible\":function($event){_vm.ImgDialogFormVisible=$event}}},[_c('img',{ref:\"showImg\"}),_vm._v(\" \"),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.ImgDialogFormVisible = false}}},[_vm._v(\"确 定\")])],1)])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-64c83456\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/goodsadd/goodsadd.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-64c83456\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./goodsadd.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./goodsadd.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./goodsadd.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-64c83456\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./goodsadd.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/goodsadd/goodsadd.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}