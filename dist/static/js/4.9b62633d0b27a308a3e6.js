webpackJsonp([4],{EBEP:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("Xxa5"),s=a.n(r),o=a("exGp"),l=a.n(o),i={data:function(){return{tableData:[],pagenum:1,pagesize:10,addDialogFormVisible:!1,editDialogFormVisible:!1,checkDialogFormVisible:!1,formLabelWidth:"100px",formObj:{username:"",password:"",email:"",mobile:""},rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"}],mobile:[{required:!0,message:"请输入电话",trigger:"blur"}]},searchValue:"",options:[]}},methods:{getAllUsersList:function(){var e=this;return l()(s.a.mark(function t(){var a,r,o;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("users?query="+e.searchValue+"&pagenum="+e.pagenum+"&pagesize="+e.pagesize);case 2:a=t.sent,r=a.data,o=r.data,200===r.meta.status&&(e.tableData=o.users);case 5:case"end":return t.stop()}},t,e)}))()},showAddDialog:function(){this.formObj={},this.addDialogFormVisible=!0},addUser:function(){var e,t=this;this.$refs.addtableForm.validate((e=l()(s.a.mark(function e(a){var r,o,l;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=8;break}return e.next=3,t.$http.post("users",{username:t.formObj.username,password:t.formObj.password,email:t.formObj.email,mobile:t.formObj.mobile});case 3:r=e.sent,o=r.data,o.data,201===(l=o.meta).status?(t.$message({message:l.msg,type:"success"}),t.addDialogFormVisible=!1,t.getAllUsersList()):t.$message.error(l.msg),e.next=9;break;case 8:t.$message({message:"请填写完整信息",type:"warning"});case 9:case"end":return e.stop()}},e,t)})),function(t){return e.apply(this,arguments)}))},search:function(){this.getAllUsersList()},showEditUserData:function(e){var t=this;return l()(s.a.mark(function a(){var r,o,l,i;return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t.editDialogFormVisible=!0,a.next=3,t.$http.get("users/"+e);case 3:r=a.sent,o=r.data,l=o.data,200===(i=o.meta).status?t.formObj=l:t.$message.error(i.msg);case 6:case"end":return a.stop()}},a,t)}))()},editPutUser:function(){var e,t=this;this.$refs.edittableForm.validate((e=l()(s.a.mark(function e(a){var r,o,l;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=8;break}return e.next=3,t.$http.put("users/"+t.formObj.id,{email:t.formObj.email,mobile:t.formObj.mobile});case 3:r=e.sent,o=r.data,o.data,200===(l=o.meta).status?(t.$message({type:"success",message:l.msg}),t.editDialogFormVisible=!1,t.getAllUsersList()):t.$message.error(l.msg),e.next=9;break;case 8:t.$message({type:"warning",message:"请填写完整信息"});case 9:case"end":return e.stop()}},e,t)})),function(t){return e.apply(this,arguments)}))},delUser:function(e){var t=this;this.$confirm("您确定要删除吗","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"error"}).then(l()(s.a.mark(function a(){var r,o,l;return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.$http.delete("users/"+e);case 2:r=a.sent,o=r.data,o.data,200===(l=o.meta).status?(t.$message({type:"success",message:l.msg}),t.getAllUsersList()):t.$message.error(l.msg);case 5:case"end":return a.stop()}},a,t)}))).catch(function(){t.$message({type:"info",message:"已取消删除"})})},changeStatus:function(e,t){var a=this;return l()(s.a.mark(function r(){var o,l,i;return s.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,a.$http.put("users/"+e+"/state/"+t);case 2:o=r.sent,l=o.data,l.data,200===(i=l.meta).status?(a.$message({type:"success",message:i.msg}),a.getAllUsersList()):a.$message.error(i.msg);case 5:case"end":return r.stop()}},r,a)}))()},getRolesList:function(){var e=this;return l()(s.a.mark(function t(){var a,r,o;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("roles");case 2:a=t.sent,r=a.data,o=r.data,r.meta,e.options=o;case 5:case"end":return t.stop()}},t,e)}))()},showRolesData:function(e){var t=this;return l()(s.a.mark(function a(){var r,o,l,i;return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t.checkDialogFormVisible=!0,a.next=3,t.$http.get("users/"+e);case 3:r=a.sent,o=r.data,l=o.data,200===(i=o.meta).status?t.formObj=l:t.$message.error(i.msg);case 6:case"end":return a.stop()}},a,t)}))()},putRolesData:function(){var e=this;return l()(s.a.mark(function t(){var a,r,o;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$http.put("users/"+e.formObj.id+"/role",{rid:e.formObj.rid});case 2:a=t.sent,r=a.data,r.data,200===(o=r.meta).status?(e.$message({type:"success",message:o.msg}),e.checkDialogFormVisible=!1,e.getAllUsersList()):e.$message.error(o.msg);case 5:case"end":return t.stop()}},t,e)}))()}},created:function(){this.getAllUsersList(),this.getRolesList()},components:{breadNav:a("Gr30").a}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-card",[a("breadNav",{attrs:{nav1:"用户管理",nav2:"用户列表"}}),e._v(" "),a("el-row",{staticClass:"searchAddRow"},[a("el-col",{attrs:{span:6}},[a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入内容"},model:{value:e.searchValue,callback:function(t){e.searchValue=t},expression:"searchValue"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.search},slot:"append"})],1)],1),e._v(" "),a("el-col",{attrs:{span:18}},[a("el-button",{staticClass:"addBtn",attrs:{type:"success",plain:""},on:{click:e.showAddDialog}},[e._v("添加用户")])],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{border:!0,data:e.tableData}},[a("el-table-column",{attrs:{type:"index"}}),e._v(" "),a("el-table-column",{attrs:{prop:"username",label:"姓名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"email",label:"邮箱"}}),e._v(" "),a("el-table-column",{attrs:{prop:"mobile",label:"电话"}}),e._v(" "),a("el-table-column",{attrs:{prop:"mg_state",label:"用户状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:function(a){return e.changeStatus(t.row.id,t.row.mg_state)}},model:{value:t.row.mg_state,callback:function(a){e.$set(t.row,"mg_state",a)},expression:"scope.row.mg_state"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",plain:"",size:"mini"},on:{click:function(a){return e.showEditUserData(t.row.id)}}}),e._v(" "),a("el-button",{attrs:{type:"success",icon:"el-icon-check",plain:"",size:"mini"},on:{click:function(a){return e.showRolesData(t.row.id)}}}),e._v(" "),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",plain:"",size:"mini"},on:{click:function(a){return e.delUser(t.row.id)}}})]}}])})],1),e._v(" "),a("el-dialog",{attrs:{title:"新增用户",visible:e.addDialogFormVisible},on:{"update:visible":function(t){e.addDialogFormVisible=t}}},[a("el-form",{ref:"addtableForm",attrs:{rules:e.rules,model:e.formObj}},[a("el-form-item",{attrs:{label:"用户名",prop:"username","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.formObj.username,callback:function(t){e.$set(e.formObj,"username",t)},expression:"formObj.username"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"密码",prop:"password","label-width":e.formLabelWidth}},[a("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.formObj.password,callback:function(t){e.$set(e.formObj,"password",t)},expression:"formObj.password"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"邮箱",prop:"email","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.formObj.email,callback:function(t){e.$set(e.formObj,"email",t)},expression:"formObj.email"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"电话",prop:"mobile","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.formObj.mobile,callback:function(t){e.$set(e.formObj,"mobile",t)},expression:"formObj.mobile"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.addDialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.addUser}},[e._v("新 增")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"修改用户",visible:e.editDialogFormVisible},on:{"update:visible":function(t){e.editDialogFormVisible=t}}},[a("el-form",{ref:"edittableForm",attrs:{rules:e.rules,model:e.formObj}},[a("el-form-item",{attrs:{label:"用户名","label-width":e.formLabelWidth}},[a("el-input",{attrs:{disabled:"",autocomplete:"off"},model:{value:e.formObj.username,callback:function(t){e.$set(e.formObj,"username",t)},expression:"formObj.username"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"email",label:"邮箱","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.formObj.email,callback:function(t){e.$set(e.formObj,"email",t)},expression:"formObj.email"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"mobile",label:"电话","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.formObj.mobile,callback:function(t){e.$set(e.formObj,"mobile",t)},expression:"formObj.mobile"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.editDialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.editPutUser}},[e._v("修 改")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"分配角色",visible:e.checkDialogFormVisible},on:{"update:visible":function(t){e.checkDialogFormVisible=t}}},[a("el-form",{attrs:{model:e.formObj}},[a("el-form-item",{attrs:{label:"用户名","label-width":e.formLabelWidth}},[e._v("\n        "+e._s(e.formObj.username)+"\n      ")]),e._v(" "),a("el-form-item",{attrs:{label:"角色","label-width":e.formLabelWidth}},[e._v("\n        "+e._s(e.formObj.rid)+"\n        "),a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.formObj.rid,callback:function(t){e.$set(e.formObj,"rid",t)},expression:"formObj.rid"}},[a("el-option",{attrs:{value:-1,label:"请选择"}}),e._v(" "),e._l(e.options,function(e){return a("el-option",{key:e.id,attrs:{label:e.roleName,value:e.id}})})],2)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.checkDialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.putRolesData}},[e._v("确定 分配")])],1)],1)],1)},staticRenderFns:[]};var c=a("VU/8")(i,n,!1,function(e){a("JgaI")},"data-v-f193657e",null);t.default=c.exports},JgaI:function(e,t){}});
//# sourceMappingURL=4.9b62633d0b27a308a3e6.js.map