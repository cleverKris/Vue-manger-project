webpackJsonp([8],{"d/ci":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("Xxa5"),o=a.n(s),r=a("exGp"),n=a.n(r),i={data:function(){return{active:0,addFormObj:{goods_name:"",goods_price:"",goods_weight:"",goods_number:""},rules:{goods_name:[{required:!0,message:"请输入商品名称",trigger:"blur"}],goods_price:[{required:!0,message:"请输入商品价格",trigger:"blur"}],goods_weight:[{required:!0,message:"请输入商品重量",trigger:"blur"}],goods_number:[{required:!0,message:"请输入商品数量",trigger:"blur"}]},menuOptions:[],menuProp:{value:"cat_id",label:"cat_name",expandTrigger:"hover"},menuSelect:[],manyData:[],onlyData:[],checked:!0,fileList:[],setHeaders:{Authorization:localStorage.getItem("token")},ImgDialogFormVisible:!1,imgUrl:"",content:""}},methods:{handleClick:function(e,t){var a=this;return n()(o.a.mark(function t(){var s,r,n,i,l,c;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a.active=+e.index,1!==a.active&&2!==a.active){t.next=12;break}if(0!==a.menuSelect.length){t.next=5;break}return a.$message.error("请选择商品分类"),t.abrupt("return");case 5:return s=a.menuSelect[a.menuSelect.length-1],r=1===a.active?"many":"only",t.next=9,a.$http.get("categories/"+s+"/attributes?sel="+r);case 9:n=t.sent,i=n.data,l=i.data,200===(c=i.meta).status?"many"===r?a.manyData=l:a.onlyData=l:a.$message.error(c.msg);case 12:case"end":return t.stop()}},t,a)}))()},getAllMenusData:function(){var e=this;return n()(o.a.mark(function t(){var a,s,r,n;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("categories?type=3");case 2:a=t.sent,s=a.data,r=s.data,200===(n=s.meta).status?e.menuOptions=r:e.$message.error(n.msg);case 5:case"end":return t.stop()}},t,e)}))()},uploadSuccess:function(e,t,a){e.data;var s=e.meta;200===s.status?(this.fileList.push({name:e.data.tmp_path,url:e.data.url}),this.$message({type:"success",message:s.msg})):this.$message.error(s.msg)},removeImg:function(e,t){for(var a=0;a<this.fileList.length;a++)this.fileList[a].name===e.name&&this.fileList.splice(a,1)},preview:function(e){var t=this;this.ImgDialogFormVisible=!0,this.$nextTick(function(){t.$refs.showImg.src=e.url})},addGoods:function(){var e=this;return n()(o.a.mark(function t(){var a,s,r,n;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a={goods_name:e.addFormObj.goods_name,goods_cat:e.menuSelect.join(","),goods_price:e.addFormObj.goods_price,goods_number:e.addFormObj.goods_number,goods_weight:e.addFormObj.goods_weight,goods_introduce:e.content},t.next=3,e.$http.post("goods",a);case 3:s=t.sent,r=s.data,r.data,201===(n=r.meta).status?(e.$message({type:"success",message:n.msg}),e.$router.push("/goods")):e.$message.error(n.msg);case 6:case"end":return t.stop()}},t,e)}))()}},created:function(){this.getAllMenusData()},components:{breadNav:a("Gr30").a}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-card",[a("breadNav",{attrs:{nav1:"商品管理",nav2:"商品列表"}}),e._v(" "),a("el-alert",{staticClass:"myAlert",attrs:{title:"添加商品信息",type:"info",center:"","show-icon":""}}),e._v(" "),a("el-steps",{staticClass:"mySteps",attrs:{"align-center":"",active:e.active,"finish-status":"success"}},[a("el-step",{attrs:{title:"基本信息"}}),e._v(" "),a("el-step",{attrs:{title:"商品参数"}}),e._v(" "),a("el-step",{attrs:{title:"商品属性"}}),e._v(" "),a("el-step",{attrs:{title:"商品图片"}}),e._v(" "),a("el-step",{attrs:{title:"商品内容"}})],1),e._v(" "),a("el-tabs",{staticClass:"myTabs",attrs:{value:"first","tab-position":"left"},on:{"tab-click":e.handleClick}},[a("el-tab-pane",{attrs:{label:"基本信息",name:"first"}},[a("el-form",{attrs:{"label-position":"top",rules:e.rules,model:e.addFormObj,"status-icon":"","label-width":"100px"}},[a("el-form-item",{attrs:{label:"商品名称",prop:"goods_name"}},[a("el-input",{attrs:{type:"text",autocomplete:"off"},model:{value:e.addFormObj.goods_name,callback:function(t){e.$set(e.addFormObj,"goods_name",t)},expression:"addFormObj.goods_name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"商品价格",prop:"goods_price"}},[a("el-input",{attrs:{type:"text",autocomplete:"off"},model:{value:e.addFormObj.goods_price,callback:function(t){e.$set(e.addFormObj,"goods_price",t)},expression:"addFormObj.goods_price"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"商品重量",prop:"goods_weight"}},[a("el-input",{attrs:{type:"text",autocomplete:"off"},model:{value:e.addFormObj.goods_weight,callback:function(t){e.$set(e.addFormObj,"goods_weight",t)},expression:"addFormObj.goods_weight"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"商品数量",prop:"goods_number"}},[a("el-input",{attrs:{type:"text",autocomplete:"off"},model:{value:e.addFormObj.goods_number,callback:function(t){e.$set(e.addFormObj,"goods_number",t)},expression:"addFormObj.goods_number"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"商品分类"}},[e._v("\n          "+e._s(e.menuSelect)+"\n          "),a("el-cascader",{attrs:{options:e.menuOptions,props:e.menuProp},model:{value:e.menuSelect,callback:function(t){e.menuSelect=t},expression:"menuSelect"}})],1)],1)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"商品参数",name:"second"}},e._l(e.manyData,function(t){return a("div",{staticClass:"canshuRow"},[a("p",{staticClass:"canshuName"},[e._v(e._s(t.attr_name))]),e._v(" "),a("div",e._l(t.attr_vals.split(","),function(t){return a("el-checkbox",{attrs:{border:""},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},[e._v(e._s(t)+"\n          ")])}),1)])}),0),e._v(" "),a("el-tab-pane",{attrs:{label:"商品属性",name:"third"}},e._l(e.onlyData,function(t){return a("div",{staticClass:"canshuRow"},[a("p",{staticClass:"canshuName"},[e._v(e._s(t.attr_name))]),e._v(" "),a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.attr_vals,callback:function(a){e.$set(t,"attr_vals",a)},expression:"item.attr_vals"}})],1)}),0),e._v(" "),a("el-tab-pane",{attrs:{label:"商品图片",name:"fourth"}},[a("el-upload",{staticClass:"upload-demo",attrs:{action:"http://localhost:8888/api/private/v1/upload","list-type":"picture","file-list":e.fileList,headers:e.setHeaders,"on-success":e.uploadSuccess,"on-remove":e.removeImg,"on-preview":e.preview}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")])],1),e._v("\n      "+e._s(e.fileList)+"\n    ")],1),e._v(" "),a("el-tab-pane",{attrs:{label:"商品内容",name:"fifth"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.addGoods}},[e._v("添加商品")]),e._v(" "),a("quill-editor",{model:{value:e.content,callback:function(t){e.content=t},expression:"content"}})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"图片预览",visible:e.ImgDialogFormVisible},on:{"update:visible":function(t){e.ImgDialogFormVisible=t}}},[a("img",{ref:"showImg"}),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.ImgDialogFormVisible=!1}}},[e._v("确 定")])],1)])],1)},staticRenderFns:[]};var c=a("VU/8")(i,l,!1,function(e){a("r+9Y")},null,null);t.default=c.exports},"r+9Y":function(e,t){}});
//# sourceMappingURL=8.56f46e8a685c277d4665.js.map